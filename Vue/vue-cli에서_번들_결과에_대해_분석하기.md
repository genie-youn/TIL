# Vue-Cli에서 번들 결과에 대해 분석하기.

## 들어가며
얼마전, 번들링된 정적파일을 서버에 배포하고 이를 CDN에 캐싱하기 위해 Warm-up을 시키는 프로세스를 구현하였다. 이때 번들링된 결과로 산출된 목록이 필요해졌고, 이런 저런 옵션을 찾아보다 `vue-cli`가 번들링 된 결과를 분석할 수 있는 레포트를 생성해주는 옵션을 알게 되었고, 간략히 정리하려 한다.

## 번들 분석
경험상 번들링 된 결과물을 분석해야 할 일을 종종 생긴다. 생성된 번들 사이즈가 너무 커서 청크를 최적화 해야 할 필요도 있고, CI에서 해당 변경이 얼마나 청크들의 사이즈를 증가시키는지 분석하고 싶을 수도 있다. `vue-cli`에 간단하게 다음과 같은 옵션을 주면 분석을 할 수 있는 레포트를 생성해준다

```
vue-cli-service build --report
vue-cli-service build --report-json
```

총 두가지 옵션이 있는데 첫번째는 `output` 디렉토리에 `html` 타입의 파일을 생성한다. 많이 사용하는 [webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer) 산출물이다. 청크가 효율적으로 분리되었는지, 더 최적화할 부분이 있는지 찾는데 편리하다.

두번째 옵션은 `raw`한 데이터를 `json` 타입의 파일로 받아보는 옵션이다. 각 청크들에 대한 상세정보와 소스까지 포함되어 있는 커다란 `json` 파일이 생성된다. 아마 번들링에 관련된 필요한 정보를 거의 얻을 수 있을 것이다.

## 마치며
번들시 필요한 정보가 생긴다면 간편하게 `report-json` 옵션을 사용해보자. 이 파일을 파싱하여 쓴다면 아마 요구사항의 대부분을 충족시킬 수 있을 것이다.
