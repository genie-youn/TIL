# Vue3 IE11 지원 중단 RFC

IE11에 대한 Vue3 지원을 중단하는 [RFC](https://github.com/vuejs/rfcs/blob/ie11/active-rfcs/0000-vue3-ie11-support.md)가 올라왔다.

IE11을 지원하기 위해 많은 비용이 발생하는 반면에 마이크로소프트 조차도 자신들의 서비스에서 IE11에 대한 지원을 중단하고 엣지로 사용자들을 유도하여 전세계 점유율이 1% 미만으로 떨어 그 필요성을 재고해 볼 필요가 있지 않겠냐는 내용이다.

IE 11을 지원하기 위해 필요한 비용들은 다음과 같다.

#### 반응성 구현의 불일치
Vue2의 반응성 시스템이 ES5 getter/setter 로 구현된 반면, Vue3는 ES2015의 Proxy 를 통해 보다 성능이 뛰어나고 완전한 반응성 시스템을 구현하였다. 하지만 이 Proxy 는 IE11에 폴리필로 주입될 수 없다.

이 점이 Vue3가 IE11을 지원하는데 가장 큰 걸림돌이 된다. 이는 서로 다른 방식으로 동작하는 두가지 버전이 (Proxy 기반의 반응성 시스템을 사용하는 하나의 버전과 Vue2와 비슷하게 ES5-getter/setter 에 기반을 둔 반응성 시스템을 사용하는 하나의 버전) 필요하다는 것을 의미한다.

Vue3의 Proxy 기반 반응성 시스템은 완벽에 가깝다. ES5에선 가로채기 어렵거나 불가능했던 많은 연산들을 감지할 수 있게 된다.
예를들면 property가 추가/삭제 되거나, array의 인덱스나 `length` 를 변경하거나, `in` 연산을 체크하는등이 있겠다. Proxy 버전으로 작성된 Vue3의 동일한 코드가 IE11 버전에선 동작하지 않게 된다. 이는 Vue 개발팀에게 기술적인 복잡도로 다가올 뿐만 아니라 개발자들에게도 문제가 된다.

우리의 원래의 목적은 IE11 버전의 development build 에 Proxy와 ES5 반응성 시스템 구현을 둘다 제공하는 것이었다. 그래서 Proxy 가 가능한 개발환경에서 실행될때 이를 감지하고 non-IE11-compatible 를 사용할 것을 경고하게 할 예정이었다.

이것은 이론적으로는 가능하지만 두가지 구현체를 합치는데서 오는 어마어마한 복잡함과 개발환경과 운영환경에서 다르게 동작하는 위험을 안고 있다.

#### 장기간으로 볼때 유지보수의 어려움
IE11을 지원한다는건 전체적인 코드베이스에 사용되고 있는 언어의 기능들을 고려해야 한다는 것을 의미하며 적절한 polyfill과 transpilation 전략을 찾아내야 한다는 것을 의미한다. IE11에 폴리필 될 수 없는 모든 새로운 기능은 또 다르게 동작하는 기능에 대한 경고를 만들어 낼 것이다. 한번 Vue 3 가 IE11 에 대한 지원을 커밋하면, 다음 메이저 릴리즈까지 이를 제거할 수 없게 된다.

#### 라이브러리 제작자들이 가져야할 복잡도
이러한 복잡도가 온전히 Vue 내부에 존재하는 문제라면 복잡하더라도 어느정도는 받아들여 질 수 있을것이다. 하지만 커뮤니티 멤버들과 논의한 결과 이러한 두가지 반응성 시스템 구현체는 필연적으로 라이브러리 제작자들에게도 노출된다는것을 깨달았다.

Vue 3가 IE11을 지원하기 위해서 라이브러리 제작자들은 반드시 이를 호출하는것을 만들어야 한다. 라이브러리 제작자들은 라이브러리가 IE11을 지원하도록 결정한다면, 모든 ES5 반응성 시스템이 갖는 차이를 염두해 두고 개발을 해야할 것이다.

#### IE11이 유지되는데 기여
과거에 고착된 죽어가는 브라우저인 IE11을 지원하는것을 즐기는 사람은 없다. 웹 생태계가 앞으로 나아가면 나아갈수록 우리가 지원하기 위해 노력해야할 범위가 넓어진다. 아이러니하게도 Vue3가 IE11을 지원하는것은 IE11을 더 사용해도 될 이유를 제공하는것과 같다. 사용자 기반을 감안할때 IE11에 대한 지원을 중단하는것이 IE11이 더 빨리 사장되게 하는 방법이다.

### IE11 지원이 반드시 필요하다면
IE11에 대한 실제 수요는 업그레이드 할 수 없는 환경에 있는 사람들로 부터 온다는 것을 잘 알고있다. (금융 기관이나 교육 업계나 스크린 리더로 인해 IE11에 의존하는 사람들) 만약 이러한 섹터를 대상으로 어플리케이션을 만들고 있다면 다른 선택지가 없다.

만약 IE11 지원이 필요하다면 Vue2를 계속 사용할 것을 권한다. Vue3 및 Vue의 향후 버전에 상당한 기술 부채를 발생시키는 대신 2.7 릴리즈에서 호환 기능을 Vue 2로 백포팅하여 두 가지 주요 버전에서 보다 긴밀한 개발 경험을 보장하는 것이 더 의미있다고 믿는다.

2.7에서 백포팅될 기능들은 다음과 같다.

- `@vue/composition-api` 플러그인이 Vue 2에 통합된다. 이는 Composition API에 기반을 둔 라이브러리들이 Vue2와 Vue3 모두에서 바로 동작할 수 있게 된다는 것을 의미한다.
- Single-File Component 의 `<script setup>` 문법
- `emits` 옵션
- TypeScript 타이핑 개선
- Vite 에서 Vue 2 지원 공식화
