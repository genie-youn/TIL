# Node와 Process

### 들어가며
Node 환경에서 개발을 하다 보면  `process`란 객체를 쓸 일이 왕왕 생긴다. 특히 `process.NODE_ENV` 같은 아이들..
런타임 혹은 빌드타임에 무언과 실행환경과 관련된 값이 필요하면 보통 이 객체 안에 있으니 가져다 쓰겠는데, 이 아이는 왜 있는건지 언제부터 있던건지 누가 생성해주는것인지 궁금해져 정리하려 한다.

> 레퍼런스는 [다음](https://nodejs.org/api/process.html) 을 참고한다.

### Node에서의 Process
`process` 객체는 현재 Node.js 프로세스의 정보와 제어를 가능하게 하는 글로벌 객체이다. 모든 Node.js 어플리케이션이라면 접근 가능하다. (r명시적으로 `require`를 통해 접근할 지는 선택의 자유이다. 즉 없이도 접근 가능하다.)

한가지 신기한건 이 `process` 객체가 Node의 `EventEmitter` 타입의 인스턴스라는것.

다음과 같은 것들을 할 수 있다.

#### 라이프 사이클
프로세스의 라이프사이클을 감지하여 특정한 훅을 받아 실행할 수 있다.
```javascript
process.on('{hook}}', (code) => {
  console.log('do something: ', code);
});
```

감지할 수 있는 훅 (이벤트)은 다음과 같다.

- beforeExit: Node의 이벤트루프가 비어있고 더 이상 추가할 작업이 없을 때
  + `process.exit()`이나 처리되지 않은 예외로 인한 종료등 명시적인 종료에 의해 애플리케이션이 종료될 때는 **호출되지 않음** 에 유의한다.
  + `beforeExit`는 특정한 작업을 추가하려는 의도가 아니고, 단순히 `exit` 대신 사용하면 안된다.
  > 왜지
