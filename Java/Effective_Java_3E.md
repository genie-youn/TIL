## 객체생성과 파괴

### ITEM 1. 생성자대신 정적 팩터리 메서드를 고려하라

클라이언트가 클래스의 인스턴스를 생성하는 전통적인 방법은 public 생성자를 이용하는것.
이것 말고도 인스턴스를 생성해 반환하는 팩터리 메서드를 만드는 방법도 있다.

팩터리 메서드를 만들면 생성자를 만드는것 보다 다섯가지 장점을 가진다.

1. 이름을 가질 수 있다. (생성자는 하나의 시그니처로 하나만 만들 수 있다.)
2. 호출할 때마다 인스턴스를 새로 생성하지 않아도 된다. (불변 객체를 미리 생성해두거나, 캐싱해 둘 수 있다. -> 인스턴스를 통제할 수 있다. 싱글턴이라던지)
3. 반환타입의 하위타입도 반환 할 수 있다. (`Collections`를 생각해볼 것)
4. 입력 매개변수에 따라 매번 다른 클래스를 반환할 수 있다. (EnumSet. 클라이언트는 팩터리 메서드가 건네주는 객체가 어떤 클래스의 인스턴지인지 알 수도, 알 필요도 없다. 그저 EnumSet의 하위클래스이면 된다.)
5. 정적 팩터리 메서드를 작성하는 시점에 반환할 객체의 클래스가 존재하지 않아도 된다. (서비스 제공자 프레임워크의 서비스 접근 API e.g. JDBC 서비스 제공자 프레임워크는 서비스 인터페이스 (`Connection`) 제공자 등록 API (`DriverManager.registerDriver`) 서비스 접근 API (`DriverManager.getConnection`) 으로 이루어진다.)

단점은 다음과 같다.

1. 상속을 하면 public 이나 package-protected 생성자가 필요하니 정적 팩터리 메서드만 제공하는 클래스는 하위 클래스를 만들 수 없다.
2. 정적 팩터리 메서드는 찾기가 어렵다. (요즘은 IDEA가..)

흔히 사용하는 컨벤션은 다음과 같다.

from : 하나의 매개변수를 받아 해당 타입의 인스턴스를 반환하는 형변환 메서드

of : 여러 매개변수를 받아 적합한 타입의 인스턴스를 반환하는 집계 메서드

valueOf : from + of

instance / getInstance : (매개변수를 받으면) 매개변수로 명시한 인스턴스를 반환하지만 같은 인스턴스임을 보장하진 않는다.

create / newInstance : 매번 새로운 인스턴스임을 보장한다.

get*Type* : getInstance 와 같으나, 반환할 클래스가 아닌 다른 클래스에 팩터리 메서드를 만들때 사용

```java
e.g. FileStorage fs = Files.getFileStorage(~~);
```

new*Type* : newInstance 와 같으나, 반환할 클래스가 아닌 다른 클래스에 펙터리 메서드를 만들때 사용

```java
BufferReader br = Files.newBufferReader(~~);
```

##### 결론
상황에 따라 생성자와 정적 팩터리 메서드를 사용하되, 일반적인 경우 정적 팩터리 메서드를 사용하는 것이 유리할 때가 많다.
